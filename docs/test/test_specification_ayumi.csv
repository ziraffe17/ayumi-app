AYUMIプロジェクト,,,,,,,,,,
サブシステム名：福祉事業所向け通所管理システム,,,,,,,,,,
機能名：認証・出席管理・日報・ダッシュボード機能,,,,,,,,,,
,,,,,,,作成者：Claude Code,,更新者：Claude Code,
,,,,,,,作成日：2025/10/05,,更新日：2025/10/05,
ケースNo,詳細,観点,対応箇所,テスト内容,想定結果,実施者,実施日,実施結果,確認者,確認日
ケース,詳細,観点,対応箇所,テスト内容,想定結果,実施者,実施日,実施結果,確認者,確認日
1,職員ログイン成功,正常ログイン,staff/login,正しいメールアドレスとパスワードでログイン,2FA画面に遷移しメールが送信される,,,,,
2,職員ログインエラー（メール形式不正）,バリデーション,staff/login,メールアドレスに不正な形式を入力,メールアドレス形式エラーと表示,,,,,
3,職員ログインエラー（パスワード不一致）,認証エラー,staff/login,誤ったパスワードでログイン,認証エラーと表示,,,,,
4,職員2FA認証成功,2段階認証,staff/two-factor,正しいOTPコードを入力,職員ホーム画面に遷移,,,,,
5,職員2FA認証エラー（コード不一致）,2段階認証,staff/two-factor,誤ったOTPコードを入力,認証エラーと表示,,,,,
6,利用者ログイン成功,正常ログイン,login,正しいログインコードとパスワードでログイン,利用者ホーム画面に遷移,,,,,
7,利用者ログインエラー（コード不一致）,認証エラー,login,誤ったログインコードでログイン,認証エラーと表示,,,,,
8,利用者ホーム画面表示,画面表示,user/home,利用者ホームにアクセス,今日の予定が表示される,,,,,
9,利用者ホーム画面（土日）,画面表示,user/home,土日にアクセス,休日表示・出退勤ボタン無効化,,,,,
10,個人ダッシュボード表示,画面表示,user/dashboard,ダッシュボードにアクセス,KPIカード・グラフが表示される,,,,,
11,ダッシュボード期間切替（今月）,期間フィルタ,user/dashboard,表示期間を「今月」に切替,今月のKPIが表示される,,,,,
12,ダッシュボード期間切替（直近3ヶ月）,期間フィルタ,user/dashboard,表示期間を「直近3ヶ月」に切替,直近3ヶ月のKPIが表示される,,,,,
13,ダッシュボード期間切替（全期間）,期間フィルタ,user/dashboard,表示期間を「全期間」に切替,全期間のKPIが表示される,,,,,
14,月次予定カレンダー表示,画面表示,user/plans/monthly,月次予定画面にアクセス,当月のカレンダーが表示される,,,,,
15,月次予定カレンダー（前月）,月切替,user/plans/monthly,前月ボタンをクリック,前月のカレンダーが表示される,,,,,
16,月次予定カレンダー（次月）,月切替,user/plans/monthly,次月ボタンをクリック,次月のカレンダーが表示される,,,,,
17,過去月の予定表示（読み取り専用）,権限制御,user/plans/monthly,過去月を表示,時間帯付きで表示・編集不可,,,,,
18,当月の予定追加,CRUD-Create,api/me/plans,当月の平日に予定を追加,予定が登録されカレンダーに表示,,,,,
19,当月の予定編集,CRUD-Update,api/me/plans,当月の予定を編集,予定が更新されカレンダーに反映,,,,,
20,当月の予定削除,CRUD-Delete,api/me/plans,当月の予定を削除,予定が削除されカレンダーから消える,,,,,
21,過去月の予定編集不可,権限制御,api/me/plans,過去月の予定を編集しようとする,編集不可エラーが表示される,,,,,
22,未来月の予定追加,権限制御,api/me/plans,未来月に予定を追加,予定が登録される,,,,,
23,土日の予定追加不可,バリデーション,api/me/plans,土日に予定を追加しようとする,土日は予定を追加できないと表示,,,,,
24,朝日報入力（新規）,CRUD-Create,api/me/reports/morning,朝日報を新規入力,朝日報が登録され提出済み表示,,,,,
25,朝日報入力（既存編集）,CRUD-Update,api/me/reports/morning,既存の朝日報を編集,朝日報が更新される,,,,,
26,朝日報必須項目チェック,バリデーション,api/me/reports/morning,必須項目を空欄で送信,必須エラーが表示される,,,,,
27,朝日報睡眠時間計算,ビジネスロジック,api/me/reports/morning,就寝23:00・起床07:00を入力,睡眠時間480分と計算される,,,,,
28,朝日報睡眠時間計算（日跨ぎ）,ビジネスロジック,api/me/reports/morning,就寝01:00・起床07:00を入力,睡眠時間360分と計算される,,,,,
29,夕日報入力（新規）,CRUD-Create,api/me/reports/evening,夕日報を新規入力,夕日報が登録され提出済み表示,,,,,
30,夕日報入力（既存編集）,CRUD-Update,api/me/reports/evening,既存の夕日報を編集,夕日報が更新される,,,,,
31,夕日報必須項目チェック,バリデーション,api/me/reports/evening,必須項目を空欄で送信,必須エラーが表示される,,,,,
32,職員ホーム画面表示,画面表示,staff/home,職員ホームにアクセス,統計カードが表示される,,,,,
33,職員ホーム統計API,API動作,api/staff/home-stats,統計APIを呼び出す,登録利用者数・平均出席率等が返却,,,,,
34,事業所ダッシュボード表示,画面表示,staff/dashboards/organization,事業所ダッシュボードにアクセス,KPIカード8枚・グラフが表示,,,,,
35,出席管理画面表示,画面表示,staff/attendance/manage,出席管理画面にアクセス,テーブルビューで予定・実績表示,,,,,
36,出席管理画面（水平スクロール）,UI動作,staff/attendance/manage,利用者名列を固定してスクロール,利用者名が固定され横スクロール可,,,,,
37,出席管理画面（当日ハイライト）,UI表示,staff/attendance/manage,当日の列を確認,当日列が黄色背景で強調表示,,,,,
38,出席実績登録,CRUD-Create,api/attendance/records,出席実績を新規登録,実績が登録され画面に反映,,,,,
39,出席実績編集,CRUD-Update,api/attendance/records,出席実績を編集,実績が更新され画面に反映,,,,,
40,出席実績削除,CRUD-Delete,api/attendance/records,出席実績を削除,実績が削除され画面から消える,,,,,
41,出席実績承認,承認機能,api/attendance/records/{id}/approve,出席実績を承認,承認フラグが立つ,,,,,
42,出席実績ロック,ロック機能,api/attendance/records/{id}/lock,出席実績をロック,ロックフラグが立ち編集不可,,,,,
43,利用者一覧表示,画面表示,staff/users,利用者一覧にアクセス,全利用者が一覧表示される,,,,,
44,利用者詳細表示,画面表示,staff/users/{id},利用者詳細にアクセス,利用者情報・KPIが表示される,,,,,
45,利用者新規作成,CRUD-Create,staff/users/create,利用者を新規作成,利用者が登録され一覧に表示,,,,,
46,利用者編集,CRUD-Update,staff/users/{id}/edit,利用者情報を編集,利用者情報が更新される,,,,,
47,利用者削除,CRUD-Delete,staff/users/{id},利用者を削除,利用者が論理削除される,,,,,
48,設定画面表示,画面表示,staff/settings,設定画面にアクセス,4セクションが表示される,,,,,
49,祝日データCSV取り込み,データ取り込み,api/holidays/import/csv,祝日CSVをアップロード,祝日データが登録される,,,,,
50,祝日データ政府API取り込み,データ取り込み,api/holidays/import/government,政府API取り込みを実行,祝日データが登録される,,,,,
51,祝日データ手動登録,CRUD-Create,api/holidays,祝日を手動登録,祝日データが登録される,,,,,
52,祝日データ削除,CRUD-Delete,api/holidays/{date},祝日を削除,祝日データが削除される,,,,,
53,XSS攻撃への対応,セキュリティ,全画面,<script>alert(1)</script>を入力,scriptが実行されず文字表示,,,,,
54,CSRF保護,セキュリティ,全POST/PUT/DELETE,CSRFトークンなしでリクエスト,419エラーが返却される,,,,,
55,未認証アクセス防止（利用者）,認可制御,user/*,未ログインで利用者画面にアクセス,ログイン画面にリダイレクト,,,,,
56,未認証アクセス防止（職員）,認可制御,staff/*,未ログインで職員画面にアクセス,ログイン画面にリダイレクト,,,,,
57,権限外アクセス防止（利用者→職員）,認可制御,staff/*,利用者アカウントで職員画面にアクセス,403エラーまたはリダイレクト,,,,,
58,権限外アクセス防止（職員→利用者）,認可制御,user/*,職員アカウントで利用者画面にアクセス,403エラーまたはリダイレクト,,,,,
59,管理者権限チェック（設定変更）,認可制御,staff/settings,一般職員で設定変更を試みる,403エラーが表示される,,,,,
60,SQLインジェクション対策,セキュリティ,全API,パラメータにSQLを含めて送信,SQLが実行されずエスケープされる,,,,,
61,セッション有効期限チェック,セッション管理,全画面,120分放置後にアクセス,ログイン画面にリダイレクト,,,,,
62,複数ブラウザ確認,クロスブラウザ,全画面,Chrome/Edge/Firefoxで動作確認,全ブラウザ同様に動作,,,,,
63,レスポンシブ表示確認,レスポンシブ,全画面,スマホ・タブレット表示確認,各デバイスで適切に表示,,,,,
64,出席率計算（通常月）,KPI計算,KpiService,8月の出席率を計算,予定日数÷実績日数で計算される,,,,,
65,出席率計算（当月・前日まで）,KPI計算,KpiService,当月の出席率を計算,前日までのデータで計算される,,,,,
66,欠席数計算,KPI計算,KpiService,欠席数を計算,attendance_type=absentの件数,,,,,
67,日報入力率計算,KPI計算,KpiService,日報入力率を計算,出席日数÷日報入力日数で計算,,,,,
68,体調トレンドグラフ,グラフ表示,user/dashboard,体調トレンドを表示,直近7日のグラフが表示される,,,,,
69,出席率推移グラフ,グラフ表示,user/dashboard,出席率推移を表示,利用開始月〜当月のグラフ表示,,,,,
70,データベース接続確認,インフラ,DB,データベース接続テスト,正常に接続される,,,,,
71,Redis接続確認,インフラ,Redis,Redisキャッシュテスト,正常にキャッシュされる,,,,,
72,メール送信確認（2FA）,メール機能,Mailhog,2FAメール送信テスト,Mailhogでメール受信確認,,,,,
73,パフォーマンス（ダッシュボード）,パフォーマンス,user/dashboard,ダッシュボード表示時間計測,2秒以内で表示される,,,,,
74,パフォーマンス（出席管理50名）,パフォーマンス,staff/attendance/manage,50名×30日のテーブル表示,3秒以内で表示される,,,,,
75,エラーページ表示（404）,エラーハンドリング,存在しないURL,存在しないURLにアクセス,404エラーページが表示される,,,,,
76,エラーページ表示（500）,エラーハンドリング,エラー発生時,サーバーエラー発生時,500エラーページが表示される,,,,,
77,ログ出力確認,ログ機能,storage/logs,エラー発生時のログ確認,laravel.logにエラーが記録,,,,,
78,監査ログ記録確認,監査機能,audit_logs,監査対象操作を実行,audit_logsテーブルに記録,,,,,
79,バックアップ・リストア,バックアップ,DB,DBバックアップとリストア実行,データが正常に復元される,,,,,
80,負荷テスト（同時アクセス）,負荷試験,全システム,10名同時アクセステスト,システムが正常に動作する,,,,,
